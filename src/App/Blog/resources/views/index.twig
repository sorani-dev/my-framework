{% extends 'layout.twig' %}

{% block title 'My Posts' %}


{% block content %}
<h1>Welcome to the Blog!</h1>

<div class="row">
    {% for row in posts | batch(4) %}
    <div class="card-deck">

        {% for post in row %}

        <div class="card mb-4">
            <div class="card-header">
                <h2><a href="{{ path('blog.show', {slug: post.slug, id: post.id}) }}">{{ post.name }}</a></h2>
            </div>
            <div class="card-body">
                <p class="card-text">
                    {{ post.content | excerpt | nl2br }}
                    {# {{ post.content | truncate(100, true, '...')  | nl2br}} #}
                </p>
                <p class="text-muted">{{ post.created_at | ago }}</p>
            </div>
            <div class="card-footer"><a href="{{ path_for('blog.show', {slug: post.slug, id: post.id}) }}" class="btn-btn-primary">Read more<span class="sr-only sr-only-focusable"> of the post</span></a></div>
        </div>

        {% endfor %}
    </div>
    {% else %}
    <p>No posts</p>
    {% endfor %}

</div>
{% if posts %}
<div class="d-flex justify-content-center mt-5 mb-4">
{{ paginate(posts, 'blog.index') }}
</div>
{% endif %}
{% endblock content %}